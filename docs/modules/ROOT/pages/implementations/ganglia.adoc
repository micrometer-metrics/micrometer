= Micrometer Ganglia
:toc:
:sectnums:
:system: ganglia

Ganglia is an aging hierarchical metrics system which enjoyed wide popularity in Linux system monitoring and is still in place in many organizations. It originated in the early 2000s at the University of California, Berkeley.

NOTE: The `micrometer-registry-ganglia` module uses the https://github.com/ganglia/gmetric4j[gmetric4j] library, which contains classes generated by the LGPL licensed https://sourceforge.net/projects/remotetea/[remotetea project].

include::_install.adoc[]

== Configuring

The following example configures a Ganglia instance:

[source,java]
----
GangliaConfig gangliaConfig = new GangliaConfig() {
    @Override
    public String host() {
        return "mygraphitehost";
    }

    @Override
    public String get(String k) {
        return null; // accept the rest of the defaults
    }
};

MeterRegistry registry = new GangliaMeterRegistry(gangliaConfig, Clock.SYSTEM);
----

Micrometer uses Dropwizard Metrics as the underlying instrumentation library when recording metrics destined for Ganglia. `GangliaConfig` is an interface with a set of default methods. If, in the implementation of `get(String k)`, rather than returning `null`, you  instead bind it to a property source, you can override the default configuration. For example, Micrometer's Spring Boot support binds properties that are prefixed with `management.metrics.export.ganglia` directly to the `GangliaConfig`:

[source,yml]
----
management.metrics.export.ganglia:
    # The location of your Ganglia server
    host: mygraphitehost

    # You will probably want to conditionally disable Ganglia publishing in local development.
    enabled: true

    # The interval at which metrics are sent to Ganglia. The default is 1 minute.
    step: 1m
----

include::hierarchical-name-mapping.adoc[]

== Graphing

This section serves as a quick start to rendering useful representations in Ganglia for metrics originating in Micrometer.

=== Counters

Ganglia counters measure mean throughput and one-, five-, and fifteen-minute exponentially-weighted moving average throughputs.

.A Ganglia rendered graph of the random walk counter.
image::implementations/ganglia-counter.png[Ganglia-rendered counter]
